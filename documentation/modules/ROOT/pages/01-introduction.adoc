= Lab: Ansible Development in Dev Spaces

[abstract]
We will explore the Red Hat OpenShift Dev Spaces environment you will be working within and learn how to launch and configure development workspaces for Ansible automation development. This includes understanding the various components available in the lab environment, authenticating with git repositories, and using the Ansible Development Tools.

This lab walks through the various components within the lab environment including launching, configuring and using Dev Spaces on OpenShift as your primary development environment for Ansible.

== Learning Objectives

After completing this module, you will be able to:

* Navigate the Red Hat OpenShift Dev Spaces interface
* Launch and configure development workspaces
* Understand the components included in the lab environment
* Set up authentication for git repositories
* Use basic Ansible Development Tools features

== 1: Introduction: What is included in the lab environment

. Red Hat OpenShift Cluster
. Ansible Automation Platform
. Red Hat OpenShift Dev Spaces
. link:https://about.gitea.com[Gitea,window=_blank] Git Server
. Lab Instructions

== 2: Contributing to this Lab Documentation

If you see an error in this lab, fork and submit a pull request against https://github.com/sabre1041/ansible_bootcamp_enablement

== 3: Dev Spaces console

link:https://access.redhat.com/products/red-hat-openshift-dev-spaces/[Red Hat OpenShift Dev Spaces,window=_blank] provides consistent, reproducible development environments based on the open-source project link:https://eclipse.dev/che/[Eclipse Che,window=_blank].

It provides, by default, a Visual Studio Code (VS Code) environment as configured by a link:https://devfile.io[devfile,window=_blank], a YAML file that defines the entire workspace as codeâ€”including all necessary tools, runtimes, and project source. This file is used to instantly generate a pre-configured, containerized development environment, ensuring every developer on a team has an identical setup and solving the "it works on my machine" problem.

=== 3.1: Launching Dev Spaces from OpenShift

. Launch the link:{openshift_cluster_console_url}[OpenShift Web Console,window=_blank]
. Select the **htpasswd_provider** button and use the credentials provided in the xref:environment-details.adoc[Environment Details,window=_blank] page to login to the OpenShift console
. On the left hand navigation pane, click on **Operators** -> **Installed Operators**
. Locate `Red Hat OpenShift Dev Spaces` and on the far right column underneath `Provided APIs`, click the link titled `Red Hat OpenShift Dev Spaces instance Specification`
+
image::01-introduction/intro1.png[OpenShift console showing Red Hat OpenShift Dev Spaces operator in the Installed Operators list]
+
. Locate `devspaces` link in the CheCluster section and click it
+
image::01-introduction/intro8.png[Red Hat OpenShift Dev Spaces CheCluster listing]
. Under `Details` click the `Red Hat OpenShift Dev Spaces URL`
+
image::01-introduction/intro2.png[Red Hat OpenShift Dev Spaces operator details page showing the Dev Spaces URL link]

NOTE: These are the detailed set of steps. For a shortcut, use the 9-block icon in the upper right to launch _Red Hat OpenShift Dev Spaces_ directly from the OpenShift console header.

image::01-introduction/intro-dev_spaces_shortcut.png[OpenShift console header showing the 9-block application launcher icon for quick access to Dev Spaces]

== 4: Dev Spaces Workspace

=== 4.1: Launching a specific Dev Spaces Workspace

Once you have launched the OpenShift Dev Spaces console, use the following steps toe access your Ansible Dev Space workspace.

. Login via OpenShift authentication using the same credentials as the OpenShift console
. Select **Allow selected permissions** to authorize access and launch the console
. Scroll down and select the workspace titled **Ansible Dev Space**
+
image::01-introduction/intro3.png[Dev Spaces workspace selection page showing available workspaces including Ansible Dev Space]
+
NOTE: It will take a few minutes for the Dev Spaces instance to initialize. When it has loaded, a Visual Studio Code interface will appear.
+
image::01-introduction/intro4.png[Dev Spaces workspace loading screen showing VS Code interface initialization]
+
. Click the **Trust Publishers and Install** button to trust the extension publishers that are included within the Dev Spaces workspace
. Click the **Yes, I trust the Authors** button to trust the workspace authors (your instructors).
. Wait a few minutes until the additional extension icons appear for Ansible and OpenShift on the left side.
+
image::01-introduction/intro5.png[VS Code interface in Dev Spaces showing Ansible and OpenShift extension icons in the left sidebar]

== 5: Ansible and OpenShift Extensions

For this lab, we have have provided a link:https://code.visualstudio.com/docs/editing/workspaces/workspaces[.code-workspace,window=_blank] configuration that included these extensions along with additional configurations to curate your development environment. See https://github.com/jeffcpullen/devspaces-example/blob/main/devspaces.code-workspace for the source of this workspace configuration.

. Click on the **Ansible** extension icon to access the Ansible Development Tools extension (covered in a subsequent lab)
+
image::01-introduction/intro6.png[Ansible extension interface in VS Code showing available Ansible development tools]

== 6: User Credentials in Workspaces

NOTE: This section describes a key feature of OpenShift Dev Spaces which enables secure access to git repositories. These details are shared for informational purposes only. No action is required to be performed in your Dev Spaces workspace.

OpenShift Dev Spaces includes the capability to store user credentials for Git repositories, such as Personal Access Tokens (PATs), which can be applied to all your workspaces. This can be accomplished after logging into the Red Hat OpenShift Dev Spaces dashboard. Click on the top right drop down next to your username and icon and select, **User Preferences**. In the User Preferences page, select **Personal Access Tokens** and add a git Personal Access Token (PAT) associated with the desired Git provider.

For more information, see the https://docs.redhat.com/en/documentation/red_hat_openshift_dev_spaces/3.23/html/user_guide/getting-started-with-devspaces#authenticating-to-a-git-server-from-a-workspace[Authenticating to a Git server from a Workspace].

== 7: Accessing a Terminal

The majority of the exercises in this lab will be performed using the Visual Studio Code terminal.

. Open a new terminal by selecting the VS Code menu starting with the hamburger (3 horizontal lines) in the top left, then selecting **Terminal** -> **New Terminal**
+
image::01-introduction/intro7.png[VS Code terminal interface showing basic command line operations in the Dev Spaces environment]
+
. Explore the environment:

[source,bash]
----
$ whoami

user
----

[source,bash]
----
cat /etc/redhat-release`

Red Hat Enterprise Linux release 9.6 (Plow)
----


[source,bash]
----
$ ansible --version

ansible [core 2.16.14]
  config file = None
  configured module search path = ['/home/user/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/local/lib/python3.11/site-packages/ansible
  ansible collection location = /home/user/.ansible/collections:/usr/share/ansible/collections
  executable location = /usr/local/bin/ansible
  python version = 3.11.11 (main, Aug 21 2025, 00:00:00) [GCC 11.5.0 20240719 (Red Hat 11.5.0-5)] (/usr/bin/python3.11)
  jinja version = 3.1.6
  libyaml = True
----

== Conclusion

In this lab, you have learned:

. The resources provided in the lab environment
. Assessing the OpenShift environment
. How to launch and navigate an Red Hat OpenShift Dev Spaces workspace
. How to provide feedback and contributions to this lab environment

This foundation prepares you to start your Ansible Bootcamp Enablement journey.

== Helpful Links

For additional references, refer to the following resources:

. https://docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/2.6/html/using_ansible_development_workspaces_for_automation_content_development/index[Using Ansible Development Workspaces for Automation Content Development]
. https://docs.redhat.com/en/documentation/red_hat_openshift_dev_spaces/3.23/html/user_guide/getting-started-with-devspaces#authenticating-to-a-git-server-from-a-workspace[Authenticating to a Git server from a Workspace].
. https://github.com/jeffcpullen/devspaces-example/[Source for the Dev Space Workspace]
. https://github.com/sabre1041/ansible_bootcamp_enablement[Source for this lab content]
